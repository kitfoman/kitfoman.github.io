<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebGL Gradient – Debug
    </title>
    <style>
      html,body{
        margin:0;
        height:100%;
        overflow:hidden;
        background:#000;
        font-family:system-ui,sans-serif;
      }
      header{
        position:fixed;
        top:0;left:0;width:100%;
        padding:.5rem 1rem;
        backdrop-filter:blur(4px);
        background:rgba(0,0,0,.3);
        color:#fff;font-size:.9rem;z-index:10;
      }
      header a{color:#8ad;text-decoration:none;margin-right:1rem;}
      #gl{width:100vw;height:100vh;display:block;}
    </style>
  </head>
  <body>
    <header>
      <a href="/">Home</a>
      <a href="https://shadertoy.com" target="_blank" rel="noopener">ShaderToy ↗</a>
      <a href="https://github.com/YOUR-USER" target="_blank" rel="noopener">GitHub ↗</a>
    </header>
    <canvas id="gl"></canvas>

    <!-- Everything below runs as an ES module to avoid global leaks -->
    <script type="module">
      import * as THREE from 'https://unpkg.com/three@0.161.0/build/three.module.js';

      // ---------- Shaders (extremely simple gradient) -------------
      const vert = /* glsl */`
        in vec3 position;
        void main(){
          gl_Position = vec4(position,1.0);
        }
      `;

      const frag = /* glsl */`
        precision highp float;
        uniform vec2 iResolution;
        uniform float iTime;
        void main(){
          vec2 uv = gl_FragCoord.xy / iResolution;
          gl_FragColor = vec4(uv, 0.5 + 0.5*sin(iTime), 1.0);
        }
      `;

      // ---------- Three.js bootstrap ------------------------------
      const canvas = document.getElementById('gl');
      const renderer = new THREE.WebGLRenderer({canvas, antialias:true});
      renderer.setPixelRatio(window.devicePixelRatio);

      const scene = new THREE.Scene();
      const camera = new THREE.Camera();
      camera.position.z = 1; // keep camera in front

      const uniforms = {
        iTime: { value: 0 },
        iResolution: { value: new THREE.Vector2() }
      };

      const material = new THREE.RawShaderMaterial({
        vertexShader: vert,
        fragmentShader: frag,
        uniforms,
        depthTest: false,
        side: THREE.DoubleSide
      });

      const quad = new THREE.Mesh(new THREE.PlaneGeometry(2,2), material);
      scene.add(quad);

      function resize(){
        const {innerWidth: w, innerHeight: h} = window;
        renderer.setSize(w,h,false);
        uniforms.iResolution.value.set(w,h);
      }
      window.addEventListener('resize', resize);
      resize();

      const clock = new THREE.Clock();
      function tick(){
        uniforms.iTime.value = clock.getElapsedTime();
        renderer.render(scene,camera);
        requestAnimationFrame(tick);
      }
      tick();
    </script>
  </body>
</html>

